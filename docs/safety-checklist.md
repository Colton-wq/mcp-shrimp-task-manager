# ✅ 安全检查清单

## 概述

在使用 MCP Shrimp Task Manager 进行任何重要操作前，请完成此安全检查清单。这将帮助您避免数据丢失和其他安全风险。

## 🚀 操作前检查清单

### 📋 基础安全检查

#### ✅ 项目状态检查
- [ ] **确认项目路径正确**
  ```bash
  pwd  # 确认当前在正确的项目目录
  ```
- [ ] **检查Git状态**
  ```bash
  git status  # 确认没有未提交的重要更改
  ```
- [ ] **验证磁盘空间**
  ```bash
  df -h  # 确认有足够空间进行备份
  ```
- [ ] **确认文件权限**
  ```bash
  ls -la  # 检查文件访问权限
  ```

#### ✅ 备份检查
- [ ] **项目已有Git仓库**
  ```bash
  ls -la .git  # 确认Git仓库存在
  ```
- [ ] **重要更改已提交**
  ```bash
  git log --oneline -5  # 查看最近提交
  ```
- [ ] **创建操作前备份**
  ```bash
  git_backup_tool({
    "project": "your-project",
    "taskId": "pre-operation-task-id",
    "operation": "create_backup",
    "message": "Pre-operation safety backup"
  })
  ```

#### ✅ 配置检查
- [ ] **安全模式已启用**
  ```bash
  config_wizard_tool({
    "project": "your-project",
    "operation": "get_summary",
    "config": {
      "safeMode": true  # 确认安全模式启用
    }
  })
  ```
- [ ] **项目类型配置正确**
- [ ] **质量级别设置合理**
- [ ] **调试模式状态确认**

### 🔍 操作特定检查

#### 对于代码清理操作
- [ ] **先运行分析模式**
  ```bash
  mandatory_code_review({
    "project": "your-project",
    "taskId": "analysis-task-id",
    "reviewScope": "comprehensive",
    "cleanupMode": "analysis_only"  # 仅分析，不删除
  })
  ```
- [ ] **审查分析结果**
  - 检查将要删除的文件列表
  - 确认没有重要文件被误标记
  - 验证清理范围符合预期
- [ ] **避免激进模式**（除非绝对必要）
- [ ] **准备回滚计划**

#### 对于质量检查操作
- [ ] **选择合适的检查范围**
  - `comprehensive`: 全面检查
  - `quality_only`: 仅质量检查
  - `security_only`: 仅安全检查
  - `diagnostic`: 诊断模式
- [ ] **限制目标文件**（如果需要）
  ```bash
  "targetFiles": ["specific-file.ts"]  # 限制检查范围
  ```

#### 对于配置更改操作
- [ ] **了解配置影响**
- [ ] **记录当前配置**
- [ ] **准备回滚配置**

## 🛡️ 风险评估矩阵

### 低风险操作 ✅
- 分析模式检查 (`analysis_only`)
- 配置查看 (`get_summary`)
- Git历史查看 (`list_history`)
- 项目类型检测 (`detect_project`)

**检查要求**: 基础检查即可

### 中风险操作 ⚠️
- 安全模式清理 (`safe` cleanup)
- 质量检查 (`quality_only`)
- 配置更改 (`apply_config`)

**检查要求**: 完成基础检查 + 操作特定检查

### 高风险操作 🚨
- 激进模式清理 (`aggressive` cleanup)
- Git回滚 (`rollback`)
- 批量文件操作

**检查要求**: 完成所有检查 + 额外确认

## 📝 操作记录模板

### 操作前记录
```
操作日期: ___________
操作类型: ___________
项目名称: ___________
操作目的: ___________
风险级别: ___________
备份状态: ___________
预期结果: ___________
```

### 操作后记录
```
操作结果: ___________
实际影响: ___________
问题发现: ___________
经验教训: ___________
后续行动: ___________
```

## 🚨 紧急情况检查清单

### 如果操作出现问题
- [ ] **立即停止操作**
- [ ] **不要进行新的文件操作**
- [ ] **检查Git历史**
  ```bash
  git_backup_tool({
    "project": "your-project",
    "taskId": "emergency-task-id",
    "operation": "list_history"
  })
  ```
- [ ] **准备回滚**
  ```bash
  git_backup_tool({
    "project": "your-project",
    "taskId": "emergency-task-id",
    "operation": "rollback",
    "commitHash": "last-safe-commit"
  })
  ```
- [ ] **记录问题详情**
- [ ] **寻求帮助**（如果需要）

### 数据丢失应急响应
1. **评估损失范围**
   - 哪些文件丢失？
   - 是否有备份？
   - 影响程度如何？

2. **尝试恢复**
   - Git历史回滚
   - 备份文件恢复
   - 系统回收站检查

3. **防止进一步损失**
   - 停止所有自动化操作
   - 创建当前状态快照
   - 隔离问题环境

## 🎓 新用户特别检查

### 首次使用前
- [ ] **阅读安全指南**
- [ ] **完成配置向导**
- [ ] **在测试项目上练习**
- [ ] **熟悉回滚操作**
- [ ] **了解所有安全机制**

### 建议的学习路径
1. **理论学习**: 阅读所有安全文档
2. **安全配置**: 使用配置向导设置
3. **模拟练习**: 在测试项目上操作
4. **逐步实践**: 从低风险操作开始
5. **经验积累**: 记录操作经验

## 📊 定期安全审查

### 每周检查
- [ ] **Git备份完整性**
- [ ] **配置设置有效性**
- [ ] **磁盘空间状况**
- [ ] **操作日志审查**

### 每月检查
- [ ] **安全策略更新**
- [ ] **工具版本检查**
- [ ] **团队培训状况**
- [ ] **应急预案测试**

## 🔧 自定义检查项

根据您的项目特点，添加自定义检查项：

### 项目特定检查
- [ ] **数据库备份状态**
- [ ] **环境变量安全**
- [ ] **依赖项安全性**
- [ ] **API密钥保护**

### 团队协作检查
- [ ] **团队成员通知**
- [ ] **共享资源状态**
- [ ] **版本控制同步**
- [ ] **部署环境影响**

## 📋 检查清单使用指南

### 如何使用此清单
1. **打印或保存**: 将清单保存为易于访问的格式
2. **逐项检查**: 不要跳过任何项目
3. **记录结果**: 标记完成状态和发现的问题
4. **保存记录**: 保留检查记录以供审查

### 自动化建议
考虑将部分检查自动化：
- 脚本化常见检查
- 集成到CI/CD流程
- 设置监控告警
- 定期自动备份

---

**重要提醒**: 这个检查清单是您的安全网。花费几分钟完成检查，可以避免数小时的数据恢复工作。安全第一，永远不要急于跳过安全检查。