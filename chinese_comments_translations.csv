Filename,Line Number,Chinese Comment,English Translation"src/index.ts",15,"// 導入所有工具函數和 schema","// Import all tool functions and schemas"
"src/index.ts",58,"// 創建MCP服務器","// Create MCP server"
"src/index.ts",73,"// 設置全局 server 實例","// Set global server instance"
"src/index.ts",77,"// 監聽 initialized 通知來啟動 web 服務器","// Listen for initialized notification to start web server"
"src/index.ts",370,"// 建立連接","// Establish connection"
"src/models/taskModel.ts",18,"// 確保獲取專案資料夾路徑","// Ensure getting project data folder path"
"src/models/taskModel.ts",24,"// 數據文件路徑（改為異步獲取）","// Data file paths (changed to asynchronous acquisition)"
"src/models/taskModel.ts",29,"// 將exec轉換為Promise形式","// Convert exec to Promise form"
"src/models/taskModel.ts",33,"// 確保數據目錄存在","// Ensure data directory exists"
"src/models/taskModel.ts",52,"// 讀取所有任務","// Read all tasks"
"src/models/taskModel.ts",60,"// 將日期字串轉換回 Date 物件","// Convert date strings back to Date objects"
"src/models/taskModel.ts",70,"// 寫入所有任務","// Write all tasks"
"src/models/taskModel.ts",78,"// 獲取所有任務","// Get all tasks"
"src/models/taskModel.ts",84,"// 根據ID獲取任務","// Get task by ID"
"src/models/taskModel.ts",91,"// 創建新任務","// Create new task"
"src/models/taskModel.ts",124,"// 更新任務","// Update task"
"src/models/taskModel.ts",138,"// Check if task is completed，已完成的任務不允許更新（除非是明確允許的欄位）","// Check if task is completed, completed tasks cannot be updated (unless explicitly allowed fields)"
"src/models/taskModel.ts",141,"// 僅允許更新 summary 欄位（任務摘要）和 relatedFiles 欄位","// Only allow updating summary field (task summary) and relatedFiles field"
"src/models/taskModel.ts",204,"// 獲取任務並檢查是否存在","// Get task and check if it exists"
"src/models/taskModel.ts",212,"// 檢查任務是否已完成","// Check if task is completed"
"src/models/taskModel.ts",218,"// 構建更新物件，只包含實際需要更新的欄位","// Build update object, only including fields that actually need updating"
"src/models/taskModel.ts",252,"// 如果沒有要更新的內容，提前返回","// If there is no content to update, return early"
"src/models/taskModel.ts",258,"// 執行更新","// Execute update"
"src/models/taskModel.ts",279,"// 獲取任務並檢查是否存在","// Get task and check if it exists"
"src/models/taskModel.ts",287,"// 檢查任務是否已完成","// Check if task is completed"
"src/models/taskModel.ts",293,"// 執行更新","// Execute update"
"src/models/taskModel.ts",368,"// 創建新任務的列表","// Create list of new tasks"
"src/models/taskModel.ts",373,"// 檢查是否為選擇性更新模式且該任務名稱已存在","// Check if it is selective update mode and the task name already exists"
"src/models/taskModel.ts",376,"// 獲取現有任務的ID","// Get the ID of the existing task"
"src/models/taskModel.ts",380,"// 查找現有任務","// Find existing task"
"src/models/taskModel.ts",386,"// 如果找到現有任務並且該任務未完成，則更新它","// If existing task is found and not completed, update it"
"src/models/taskModel.ts",395,"// 更新任務的基本信息，但保留原始ID、創建時間等","// Update basic task information, but preserve original ID, creation time, etc."
"src/models/taskModel.ts",402,"// 後面會處理 dependencies","// Dependencies will be processed later"
"src/models/taskModel.ts",405,"// 新增：保存實現指南（如果有）","// New: Save implementation guide (if any)"
"src/models/taskModel.ts",408,"// 新增：保存驗證標準（如果有）","// New: Save verification criteria (if any)"
"src/models/taskModel.ts",411,"// 新增：保存全局分析結果（如果有）","// New: Save global analysis result (if any)"
"src/models/taskModel.ts",416,"// 處理相關文件（如果有）","// Process related files (if any)"
"src/models/taskModel.ts",422,"// 將更新後的任務添加到新任務列表","// Add updated task to new task list"
"src/models/taskModel.ts",426,"// 從tasksToKeep中移除此任務，因為它已經被更新並添加到newTasks中了","// Remove this task from tasksToKeep because it has been updated and added to newTasks"
"src/models/taskModel.ts",431,"// 創建新任務","// Create new task"
"src/models/taskModel.ts",436,"// 將新任務的名稱和ID添加到映射中","// Add new task name and ID to mapping"
"src/models/taskModel.ts",462,"// 處理任務之間的依賴關係","// Handle dependencies between tasks"
"src/models/taskModel.ts",468,"// 如果存在依賴關係，處理它們","// If dependencies exist, process them"
"src/models/taskModel.ts",474,"// 首先嘗試將依賴項解釋為任務ID","// First try to interpret dependency as task ID"
"src/models/taskModel.ts",478,"// 如果依賴項看起來不像UUID，則嘗試將其解釋為任務名稱","// If dependency does not look like UUID, try to interpret it as task name"
"src/models/taskModel.ts",485,"// 如果映射中存在此名稱，則使用對應的ID","// If this name exists in mapping, use corresponding ID"
"src/models/taskModel.ts",490,"continue; // 跳過此依賴","continue; // Skip this dependency"
"src/models/taskModel.ts",494,"// 是UUID格式，但需要確認此ID是否對應實際存在的任務","// Is UUID format, but need to confirm if this ID corresponds to an actually existing task"
"src/models/taskModel.ts",500,"continue; // 跳過此依賴","continue; // Skip this dependency"
"src/models/taskModel.ts",512,"// 合併保留的任務和新任務","// Merge kept tasks and new tasks"
"src/models/taskModel.ts",516,"// 寫入更新後的任務列表","// Write updated task list"
"src/models/taskModel.ts",523,"// 檢查任務是否可以執行（所有依賴都已完成）","// Check if task can be executed (all dependencies completed)"
"src/models/taskModel.ts",535,"return { canExecute: false }; // 已完成的任務不需要再執行","return { canExecute: false }; // Completed tasks do not need to be executed again"
"src/models/taskModel.ts",540,"return { canExecute: true }; // 沒有依賴的任務可以直接執行","return { canExecute: true }; // Tasks without dependencies can be executed directly"
"src/models/taskModel.ts",561,"// 刪除任務","// Delete task"
"src/models/taskModel.ts",573,"// 檢查任務狀態，已完成的任務不允許刪除","// Check task status, completed tasks cannot be deleted"
"src/models/taskModel.ts",579,"// 檢查是否有其他任務依賴此任務","// Check if other tasks depend on this task"
"src/models/taskModel.ts",596,"// 執行刪除操作","// Execute delete operation"
"src/models/taskModel.ts",604,"// 評估任務複雜度","// Assess task complexity"
"src/models/taskModel.ts",615,"// 評估各項指標","// Assess various indicators"
"src/models/taskModel.ts",622,"// 基於各項指標評估複雜度級別","// Assess complexity level based on various indicators"
"src/models/taskModel.ts",626,"// 描述長度評估","// Description length assessment"
"src/models/taskModel.ts",642,"// 依賴數量評估（取最高級別）","// Dependencies count assessment (take highest level)"
"src/models/taskModel.ts",661,"// 注記長度評估（取最高級別）","// Notes length assessment (take highest level)"
"src/models/taskModel.ts",678,"// 根據複雜度級別生成處理建議","// Generate processing suggestions based on complexity level"
"src/models/taskModel.ts",682,"// 低複雜度任務建議","// Low complexity task suggestions"
"src/models/taskModel.ts",688,"// 中等複雜度任務建議","// Medium complexity task suggestions"
"src/models/taskModel.ts",697,"// 高複雜度任務建議","// High complexity task suggestions"
"src/models/taskModel.ts",711,"// 極高複雜度任務建議","// Very high complexity task suggestions"
"src/models/taskModel.ts",748,"// 清除所有任務","// Clear all tasks"
"src/models/taskModel.ts",756,"// 確保數據目錄存在","// Ensure data directory exists"
"src/models/taskModel.ts",760,"// 讀取現有任務","// Read existing tasks"
"src/models/taskModel.ts",764,"// 如果沒有任務，直接返回","// If no tasks, return directly"
"src/models/taskModel.ts",770,"// 篩選出已完成的任務","// Filter out completed tasks"
"src/models/taskModel.ts",776,"// 創建備份文件名","// Create backup file name"
"src/models/taskModel.ts",784,"// 確保 memory 目錄存在","// Ensure memory directory exists"
"src/models/taskModel.ts",793,"// 創建 memory 目錄下的備份路徑","// Create backup path under memory directory"
"src/models/taskModel.ts",797,"// 同時寫入到 memory 目錄 (只包含已完成的任務)","// Also write to memory directory (only containing completed tasks)"
"src/models/taskModel.ts",804,"// 清空任務文件","// Clear task file"
"src/models/taskModel.ts",823,"// 使用系統指令搜尋任務記憶","// Use system command to search task memory"
"src/models/taskModel.ts",839,"// 讀取當前任務檔案中的任務","// Read tasks from current task file"
"src/models/taskModel.ts",844,"// 搜尋記憶資料夾中的任務","// Search tasks in memory folder"
"src/models/taskModel.ts",849,"// 確保記憶資料夾存在","// Ensure memory folder exists"
"src/models/taskModel.ts",853,"// 生成搜尋命令","// Generate search command"
"src/models/taskModel.ts",857,"// 如果有搜尋命令，執行它","// If there is a search command, execute it"
"src/models/taskModel.ts",866,"// 解析搜尋結果，提取符合的檔案路徑","// Parse search results, extract matching file paths"
"src/models/taskModel.ts",872,"// 格式通常是: 文件路徑:匹配內容","// Format is usually: file path:matching content"
"src/models/taskModel.ts",881,"// 限制讀取檔案數量","// Limit number of files to read"
"src/models/taskModel.ts",889,"// 只處理符合條件的檔案","// Only process files that meet criteria"
"src/models/taskModel.ts",896,"// 格式化日期字段","// Format date fields"
"src/models/taskModel.ts",911,"// 進一步過濾任務確保符合條件","// Further filter tasks to ensure criteria are met"
"src/models/taskModel.ts",946,"// 從當前任務中過濾符合條件的任務","// Filter qualifying tasks from current tasks"
"src/models/taskModel.ts",950,"// 合併結果並去重","// Merge results and deduplicate"
"src/models/taskModel.ts",954,"// 當前任務優先","// Current tasks have priority"
"src/models/taskModel.ts",960,"// 加入記憶任務，避免重複","// Add memory tasks, avoiding duplicates"
"src/models/taskModel.ts",968,"// 合併後的結果","// Merged results"
"src/models/taskModel.ts",972,"// 排序 - 按照更新或完成時間降序排列","// Sort - by update or completion time in descending order"
"src/models/taskModel.ts",975,"// 優先按完成時間排序","// Sort by completion time first"
"src/models/taskModel.ts",980,"return -1; // a完成了但b未完成，a排前面","return -1; // a is completed but b is not, a comes first"
"src/models/taskModel.ts",983,"return 1; // b完成了但a未完成，b排前面","return 1; // b is completed but a is not, b comes first"
"src/models/taskModel.ts",987,"// 否則按更新時間排序","// Otherwise sort by update time"
"src/models/taskModel.ts",992,"// 分頁處理","// Pagination processing"
"src/models/taskModel.ts",996,"const safePage = Math.max(1, Math.min(page, totalPages || 1)); // 確保頁碼有效","const safePage = Math.max(1, Math.min(page, totalPages || 1)); // Ensure page number is valid"
"src/models/taskModel.ts",1013,"// 根據平台生成適當的搜尋命令","// Generate appropriate search command based on platform"
"src/models/taskModel.ts",1020,"// 安全地轉義用戶輸入","// Safely escape user input"
"src/models/taskModel.ts",1025,"// 檢測操作系統類型","// Detect operating system type"
"src/models/taskModel.ts",1030,"// Windows環境，使用findstr命令","// Windows environment, use findstr command"
"src/models/taskModel.ts",1033,"// ID搜尋","// ID search"
"src/models/taskModel.ts",1037,"// 單一關鍵字","// Single keyword"
"src/models/taskModel.ts",1041,"// 多關鍵字搜尋 - Windows中使用PowerShell","// Multi-keyword search - use PowerShell in Windows"
"src/models/taskModel.ts",1047,"// Unix/Linux/MacOS環境，使用grep命令","// Unix/Linux/MacOS environment, use grep command"
"src/models/taskModel.ts",1054,"// 多關鍵字用管道連接多個grep命令","// Multi-keyword using pipe to connect multiple grep commands"
"src/models/taskModel.ts",1077,"// 移除所有控制字符和特殊字符","// Remove all control characters and special characters"
"src/models/taskModel.ts",1081,".replace(/[&;`$""'<>|]/g, """"); // Shell 特殊字符",".replace(/[&;`$""'<>|]/g, """"); // Shell special characters"
"src/models/taskModel.ts",1085,"// 過濾當前任務列表","// Filter current task list"
"src/prompts/generators/analyzeTask.ts",60,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/clearAllTasks.ts",45,"// 處理未確認的情況","// Handle unconfirmed situations"
"src/prompts/generators/clearAllTasks.ts",54,"// 處理無任務需要清除的情況","// Handle situations where no tasks need to be cleared"
"src/prompts/generators/clearAllTasks.ts",63,"// 處理清除成功或失敗的情況","// Handle success or failure situations for clearing"
"src/prompts/generators/clearAllTasks.ts",67,"// 使用模板生成 backupInfo","// Use template to generate backupInfo"
"src/prompts/generators/clearAllTasks.ts",85,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/completeTask.ts",39,"// 開始構建基本 prompt","// Start building the basic prompt"
"src/prompts/generators/completeTask.ts",47,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/deleteTask.ts",40,"// 處理任務不存在的情況","// Handle case when task does not exist"
"src/prompts/generators/deleteTask.ts",51,"// 處理任務已完成的情況","// Handle case when task is already completed"
"src/prompts/generators/deleteTask.ts",63,"// 處理刪除成功或失敗的情況","// Handle successful or failed deletion cases"
"src/prompts/generators/deleteTask.ts",72,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/executeTask.ts",185,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/getTaskDetail.ts",38,"// 如果有錯誤，顯示錯誤訊息","// If there is an error, display error message"
"src/prompts/generators/getTaskDetail.ts",49,"// 如果找不到任務，顯示找不到任務的訊息","// If task cannot be found, display task not found message"
"src/prompts/generators/getTaskDetail.ts",133,"// 開始構建基本 prompt","// Start building the basic prompt"
"src/prompts/generators/getTaskDetail.ts",150,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/initProjectRules.ts",14,"// 目前沒有額外參數，未來可按需擴展","// Currently no additional parameters, can be expanded as needed in the future"
"src/prompts/generators/initProjectRules.ts",33,"// 載入可能的自定義 prompt (通過環境變數覆蓋或追加)","// Load possible custom prompt (override or append via environment variables)"
"src/prompts/generators/listTasks.ts",38,"// 如果沒有任務，顯示通知","// If there are no tasks, show notification"
"src/prompts/generators/listTasks.ts",51,"// 獲取所有狀態的計數","// Get counts for all statuses"
"src/prompts/generators/listTasks.ts",78,"// 添加每個狀態下的詳細任務","// Add detailed tasks under each status"
"src/prompts/generators/listTasks.ts",115,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/planTask.ts",46,"// 如果存在任務，則添加相關資訊","// If tasks exist, add related information"
"src/prompts/generators/planTask.ts",51,"// 處理已完成任務","// Process completed tasks"
"src/prompts/generators/planTask.ts",55,"// 最多顯示10個已完成任務，避免提示詞過長","// Show at most 10 completed tasks to avoid overly long prompts"
"src/prompts/generators/planTask.ts",63,"// 產生完成時間資訊 (如果有)","// Generate completion time information (if available)"
"src/prompts/generators/planTask.ts",76,"// 如果不是最後一個任務，添加換行","// If not the last task, add line break"
"src/prompts/generators/planTask.ts",83,"// 如果有更多任務，顯示提示","// If there are more tasks, show hint"
"src/prompts/generators/planTask.ts",92,"// 處理未完成任務","// Process unfinished tasks"
"src/prompts/generators/planTask.ts",113,"// 如果不是最後一個任務，添加換行","// If not the last task, add line break"
"src/prompts/generators/planTask.ts",145,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/queryTask.ts",78,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/reflectTask.ts",40,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/researchMode.ts",37,"// 處理之前的研究狀態","// Process previous research state"
"src/prompts/generators/researchMode.ts",52,"// 載入主要模板","// Load main template"
"src/prompts/generators/researchMode.ts",64,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/splitTasks.ts",61,"// 查找依賴任務的名稱，提供更友好的顯示","// Find the name of the dependent task for more friendly display"
"src/prompts/generators/splitTasks.ts",90,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/updateTaskContent.ts",50,"// 處理任務不存在的情況","// Handle case when task doesn't exist"
"src/prompts/generators/updateTaskContent.ts",61,"// 處理驗證錯誤的情況","// Handle validation error case"
"src/prompts/generators/updateTaskContent.ts",72,"// 處理空更新的情況","// Handle empty update case"
"src/prompts/generators/updateTaskContent.ts",81,"// 處理更新成功或失敗的情況","// Handle successful or failed update case"
"src/prompts/generators/updateTaskContent.ts",86,"// 更新成功且有更新後的任務詳情","// Successful update with updated task details"
"src/prompts/generators/updateTaskContent.ts",93,"// 編合相關文件信息","// Compile related file information"
"src/prompts/generators/updateTaskContent.ts",101,"// 按文件類型分組","// Group by file type"
"src/prompts/generators/updateTaskContent.ts",111,"// 為每種文件類型生成內容","// Generate content for each file type"
"src/prompts/generators/updateTaskContent.ts",123,"// 處理任務備註","// Process task notes"
"src/prompts/generators/updateTaskContent.ts",134,"// 生成成功更新的詳細信息","// Generate detailed information for successful update"
"src/prompts/generators/updateTaskContent.ts",157,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/generators/verifyTask.ts",45,"// 簡單的摘要提取：截取前 maxLength 個字符並添加省略號","// Simple summary extraction: truncate to first maxLength characters and add ellipsis"
"src/prompts/generators/verifyTask.ts",86,"// 載入可能的自定義 prompt","// Load possible custom prompt"
"src/prompts/index.ts",8,"// 匯出核心工具","// Export core tools"
"src/prompts/index.ts",12,"// 當完成各個模塊時，將在下方匯出各個 prompt 生成器","// When each module is completed, the respective prompt generators will be exported below"
"src/prompts/index.ts",14,"// 例如：","// For example:"
"src/prompts/loader.ts",36,"// 轉換為大寫，作為環境變數的一部分","// Convert to uppercase as part of the environment variable"
"src/prompts/loader.ts",40,"// 檢查是否有替換模式的環境變數","// Check if there is a replacement mode environment variable"
"src/prompts/loader.ts",44,"// 使用環境變數完全替換原始 prompt","// Use environment variable to completely replace original prompt"
"src/prompts/loader.ts",49,"// 檢查是否有追加模式的環境變數","// Check if there is an append mode environment variable"
"src/prompts/loader.ts",53,"// 將環境變數內容追加到原始 prompt 後","// Append environment variable content to the original prompt"
"src/prompts/loader.ts",58,"// 如果沒有自定義，則使用原始 prompt","// If no customization, use the original prompt"
"src/prompts/loader.ts",77,"// 使用簡單的模板替換方法，將 {paramName} 替換為對應的參數值","// Use simple template replacement method to replace {paramName} with corresponding parameter values"
"src/prompts/loader.ts",82,"// 如果值為 undefined 或 null，使用空字串替換","// If value is undefined or null, replace with empty string"
"src/prompts/loader.ts",87,"// 使用正則表達式替換所有匹配的佔位符","// Use regular expression to replace all matching placeholders"
"src/prompts/loader.ts",114,"const checkedPaths: string[] = []; // 用於更詳細的錯誤報告","// Used for more detailed error reporting"
"src/prompts/loader.ts",117,"// 1. 檢查 DATA_DIR 中的自定義路徑","// 1. Check custom paths in DATA_DIR"
"src/prompts/loader.ts",119,"// path.resolve 可以處理 templateSetName 是絕對路徑的情況","// path.resolve can handle cases where templateSetName is an absolute path"
"src/prompts/loader.ts",127,"// 2. 如果未找到自定義路徑，檢查特定的內建模板目錄","// 2. If custom path not found, check specific built-in template directory"
"src/prompts/loader.ts",130,"// 假設 templateSetName 對於內建模板是 'en', 'zh' 等","// Assume templateSetName for built-in templates is 'en', 'zh', etc."
"src/prompts/loader.ts",143,"// 3. 如果特定的內建模板也未找到，且不是 'en' (避免重複檢查)","// 3. If specific built-in template is also not found and not 'en' (avoid duplicate checking)"
"src/prompts/loader.ts",157,"// 4. 如果所有路徑都找不到模板，拋出錯誤","// 4. If template is not found in all paths, throw error"
"src/prompts/loader.ts",167,"// 5. 讀取找到的文件","// 5. Read the found file"
"src/public/script.js",1,"// 全局變量","// Global variables"
"src/public/script.js",7,"let globalAnalysisResult = null; // 新增：儲存全局分析結果","// New: Store global analysis result"
"src/public/script.js",10,"let width, height; // << 新增：將寬高定義為全局變量","// << New: Define width and height as global variables"
"src/public/script.js",12,"let isGraphInitialized = false; // << 新增：追蹤圖表是否已初始化","// << New: Track whether the chart has been initialized"
"src/public/script.js",14,"let zoom; // << 新增：保存縮放行為對象","// << New: Save zoom behavior object"
"src/public/script.js",17,"// 新增：i18n 全局變量","// New: i18n global variables"
"src/public/script.js",19,"let currentLang = ""en""; // 預設語言","// Default language"
"src/public/script.js",21,"let translations = {}; // 儲存加載的翻譯","// Store loaded translations"
"src/public/script.js",24,"// DOM元素","// DOM elements"
"src/public/script.js",38,"); // 假設 HTML 中有這個元素","// Assuming this element exists in HTML"
"src/public/script.js",40,"const langSwitcher = document.getElementById(""lang-switcher""); // << 新增：獲取切換器元素","// << New: Get switcher element"
"src/public/script.js",42,"const resetViewBtn = document.getElementById(""reset-view-btn""); // << 新增：獲取重置按鈕元素","// << New: Get reset button element"
"src/public/script.js",45,"// 初始化","// Initialization"
"src/public/script.js",48,"// fetchTasks(); // 將由 initI18n() 觸發","// fetchTasks(); // Will be triggered by initI18n()"
"src/public/script.js",50,"initI18n(); // << 新增：初始化 i18n","// << New: Initialize i18n"
"src/public/script.js",54,"updateDimensions(); // << 新增：初始化時更新尺寸","// << New: Update dimensions during initialization"
"src/public/script.js",57,"// 事件監聽器","// Event listeners"
"src/public/script.js",59,"// statusFilter.addEventListener(""change"", renderTasks); // 將由 changeLanguage 觸發或在 applyTranslations 後觸發","// statusFilter.addEventListener(""change"", renderTasks); // Will be triggered by changeLanguage or after applyTranslations"
"src/public/script.js",65,"// 新增：重置視圖按鈕事件監聽","// New: Reset view button event listener"
"src/public/script.js",71,"// 新增：搜索和排序事件監聽","// New: Search and sorting event listeners"
"src/public/script.js",90,"// 新增：設置 SSE 連接","// New: Setup SSE connection"
"src/public/script.js",94,"// 新增：語言切換器事件監聽","// New: Language switcher event listener"
"src/public/script.js",102,"// 新增：視窗大小改變時更新尺寸","// New: Update dimensions when window size changes"
"src/public/script.js",114,"// 新增：i18n 核心函數","// New: i18n core functions"
"src/public/script.js",116,"// 1. 語言檢測 (URL 參數 > navigator.language > 'en')","// 1. Language detection (URL parameters > navigator.language > 'en')"
"src/public/script.js",119,"// 1. 優先從 URL 參數讀取","// 1. Read from URL parameters first"
"src/public/script.js",127,"// 2. 檢查瀏覽器語言（移除 localStorage 檢查）","// 2. Check browser language (removed localStorage check)"
"src/public/script.js",132,"if (browserLang.toLowerCase().startsWith(""zh"")) return ""zh-TW""; // 簡體也先 fallback 到繁體","// Simplified Chinese also fallback to Traditional Chinese"
"src/public/script.js",137,"// 3. 預設值","// 3. Default value"
"src/public/script.js",142,"// 2. 異步加載翻譯文件","// 2. Asynchronously load translation files"
"src/public/script.js",168,"// 3. 翻譯函數","// 3. Translation function"
"src/public/script.js",172,"// 簡單的佔位符替換（例如 {message}）","// Simple placeholder replacement (e.g., {message})"
"src/public/script.js",183,"// 4. 應用翻譯到 DOM (處理 textContent, placeholder, title)","// 4. Apply translations to DOM (handle textContent, placeholder, title)"
"src/public/script.js",191,"// 優先處理特定屬性","// Handle specific attributes first"
"src/public/script.js",199,"// 如果需要，也可以翻譯 value，但通常不需要","// If needed, value can also be translated, but usually not necessary"
"src/public/script.js",202,"// 對於大多數元素，設置 textContent","// For most elements, set textContent"
"src/public/script.js",207,"// 手動更新沒有 data-key 的元素（如果有的話）","// Manually update elements without data-key (if any)"
"src/public/script.js",209,"// 例如，如果 footer 時間格式需要本地化，可以在這裡處理","// For example, if footer time format needs localization, it can be handled here"
"src/public/script.js",211,"// updateCurrentTime(); // 確保時間格式也可能更新（如果需要）","// updateCurrentTime(); // Ensure time format may also be updated (if needed)"
"src/public/script.js",215,"// 5. 初始化 i18n","// 5. Initialize i18n"
"src/public/script.js",220,"// << 新增：設置切換器的初始值 >>","// << New: Set initial value of the switcher >>"
"src/public/script.js",230,"// 新增：語言切換函數","// New: Language switching function"
"src/public/script.js",273,"// 可以添加用戶反饋，例如顯示錯誤消息","// User feedback can be added, such as displaying error messages"
"src/public/script.js",279,"// --- i18n 核心函數結束 ---","// --- i18n core functions end ---"
"src/public/script.js",282,"// 獲取任務數據","// Fetch task data"
"src/public/script.js",286,"// 初始載入時顯示 loading (現在使用翻譯)","// Show loading during initial load (now uses translation)"
"src/public/script.js",303,"// 提取全局分析結果 (找第一個非空的)","// Extract global analysis result (find the first non-empty one)"
"src/public/script.js",309,"break; // 找到一個就夠了","// Found one is enough"
"src/public/script.js",313,"// 只有當找到的結果與當前儲存的不同時才更新","// Only update when the found result is different from the currently stored one"
"src/public/script.js",317,"renderGlobalAnalysisResult(); // 更新顯示","// Update display"
"src/public/script.js",342,"// *** 移除 setTimeout 輪詢 ***","// setTimeout(fetchTasks, 30000);"
"src/public/script.js",365,"// 新增：設置 Server-Sent Events 連接","// New: Setup Server-Sent Events connection"
"src/public/script.js",395,"// 新增：比較任務列表是否有變化的輔助函數 (最全面版)","// New: Helper function to compare whether the task list has changed (most comprehensive version)"
"src/public/script.js",516,"// 新增：顯示臨時錯誤訊息的函數","// New: Function to display temporary error messages"
"src/public/script.js",528,"// 渲染任務列表 - *** 需要進一步優化以實現智慧更新 ***","// Render task list - *** Needs further optimization to achieve smart updates ***"
"src/public/script.js",549,"// 儲存篩選後的任務 ID 集合，用於圖形渲染","// Store the filtered task ID set for graphic rendering"
"src/public/script.js",1227,"// 取消固定位置，讓節點可以繼續被力導引影響 (如果需要)","// d.fx = null;"
"src/public/script.js",1427,"// 可以選擇性地將選中節點帶到最前面","// selectedNode.raise();"
"src/public/script.js",1522,"// 函數：啟用節點拖拽 (保持不變)","// ... drag ..."
"src/public/style.css",336,"/* 進度指示器樣式 */","/* Progress indicator styles */"
"src/public/style.css",368,"background-color: #f1c40f; /* 與status-pending一致 */","/* Consistent with status-pending */"
"src/public/style.css",396,"/* 依賴關係圖樣式 */","/* Dependency graph styles */"
"src/public/style.css",399,"display: block; /* 避免底部多餘空間 */","/* Avoid extra space at the bottom */"
"src/public/style.css",407,"/* 根據類型設置基礎顏色 */","/* Set base colors according to type */"
"src/public/style.css",411,"fill: var(--primary-color); /* 當前選中任務 */","/* Currently selected task */"
"src/public/style.css",415,"fill: var(--danger-color); /* 前置依賴任務 */","/* Pre-dependency task */"
"src/public/style.css",419,"fill: var(--secondary-color); /* 後置依賴任務 */","/* Post-dependency task */"
"src/public/style.css",423,"fill: #7f8c8d; /* 未知任務 */","/* Unknown task */"
"src/public/style.css",427,"/* 根據狀態調整節點透明度或邊框 */","/* Adjust node opacity or border based on status */"
"src/public/style.css",433,"/* 可以添加特殊效果，如描邊動畫 */","/* Can add special effects, such as stroke animation */"
"src/public/style.css",440,"r: 14; /* 懸停時放大 */","/* Enlarge on hover */"
"src/public/style.css",449,"pointer-events: none; /* 避免文本干擾點擊 */","/* Avoid text interfering with clicks */"
"src/public/style.css",453,"/* 新增：高亮節點樣式 */","/* New: Highlight node styles */"
"src/public/style.css",456,"stroke: var(--accent-color) !important; /* 使用重要標誌確保覆蓋 */","/* Use important flag to ensure override */"
"src/public/style.css",482,"/* 過濾器區域樣式 */","/* Filter area styles */"
"src/public/style.css",501,"flex-grow: 1; /* 讓搜索框佔據更多空間 */","/* Let the search box occupy more space */"
"src/public/style.css",506,"/* 新增：缩略图视口指示器样式 */","/* New: Minimap viewport indicator styles */"
"src/tools/index.ts",1,"// 導出所有任務工具","// Export all task tools"
"src/tools/index.ts",5,"// 導出所有專案工具","// Export all project tools"
"src/tools/index.ts",9,"// 導出所有思維鏈工具","// Export all thought chain tools"
"src/tools/index.ts",13,"// 導出所有研究工具","// Export all research tools"
"src/tools/project/index.ts",1,"// 導出所有專案工具","// Export all project tools"
"src/tools/project/initProjectRules.ts",4,"// 定義schema","// Define schema"
"src/tools/project/initProjectRules.ts",16,"// 從生成器獲取提示詞","// Get prompt from generator"
"src/tools/project/initProjectRules.ts",20,"// 返回成功響應","// Return success response"
"src/tools/project/initProjectRules.ts",31,"// 錯誤處理","// Error handling"
"src/tools/research/index.ts",1,"// 導出研究模式工具","// Export research mode tools"
"src/tools/research/researchMode.ts",7,"// 研究模式工具","// Research mode tool"
"src/tools/research/researchMode.ts",46,"// 獲取基礎目錄路徑","// Get base directory path"
"src/tools/research/researchMode.ts",53,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get final prompt"
"src/tools/task/analyzeTask.ts",4,"// 分析問題工具","// Task analysis tool"
"src/tools/task/analyzeTask.ts",40,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/clearAllTasks.ts",8,"// 清除所有任務工具","// Clear all tasks tool"
"src/tools/task/clearAllTasks.ts",25,"// 安全檢查：如果沒有確認，則拒絕操作","// Safety check: refuse operation if not confirmed"
"src/tools/task/clearAllTasks.ts",38,"// 檢查是否真的有任務需要清除","// Check if there are actually tasks that need to be cleared"
"src/tools/task/clearAllTasks.ts",52,"// 執行清除操作","// Execute clear operation"
"src/tools/task/deleteTask.ts",10,"// 刪除任務工具","// Delete task tool"
"src/tools/task/executeTask.ts",13,"// 執行任務工具","// Execute task tool"
"src/tools/task/executeTask.ts",30,"// 檢查任務是否存在","// Check if task exists"
"src/tools/task/executeTask.ts",45,"// 檢查任務是否可以執行（依賴任務都已完成）","// Check if task can be executed (all dependency tasks are completed)"
"src/tools/task/executeTask.ts",67,"// 如果任務已經標記為「進行中」，提示用戶","// If task is already marked as ""in progress"", prompt user"
"src/tools/task/executeTask.ts",81,"// 如果任務已經標記為「已完成」，提示用戶","// If task is already marked as ""completed"", prompt user"
"src/tools/task/executeTask.ts",95,"// 更新任務狀態為「進行中」","// Update task status to ""in progress"""
"src/tools/task/executeTask.ts",99,"// 評估任務複雜度","// Assess task complexity"
"src/tools/task/executeTask.ts",103,"// 將複雜度結果轉換為適當的格式","// Convert complexity results to appropriate format"
"src/tools/task/executeTask.ts",116,"// 獲取依賴任務，用於顯示完成摘要","// Get dependency tasks for displaying completion summary"
"src/tools/task/executeTask.ts",128,"// 加載任務相關的文件內容","// Load task-related file content"
"src/tools/task/executeTask.ts",146,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get final prompt"
"src/tools/task/getTaskDetail.ts",5,"// 取得完整任務詳情的參數","// Get parameters for full task details"
"src/tools/task/getTaskDetail.ts",18,"// 取得任務完整詳情","// Get complete task details"
"src/tools/task/getTaskDetail.ts",24,"// 使用 searchTasksWithCommand 替代 getTaskById，實現記憶區任務搜索","// Use searchTasksWithCommand instead of getTaskById to implement memory area task search"
"src/tools/task/getTaskDetail.ts",26,"// 設置 isId 為 true，表示按 ID 搜索；頁碼為 1，每頁大小為 1","// Set isId to true to indicate search by ID; page number is 1, page size is 1"
"src/tools/task/getTaskDetail.ts",30,"// 檢查是否找到任務","// Check if task was found"
"src/tools/task/getTaskDetail.ts",45,"// 獲取找到的任務（第一個也是唯一的一個）","// Get the found task (the first and only one)"
"src/tools/task/getTaskDetail.ts",49,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/getTaskDetail.ts",65,"// 使用prompt生成器獲取錯誤訊息","// Use prompt generator to get error message"
"src/tools/task/index.ts",1,"// 導出所有任務工具","// Export all task tools"
"src/tools/task/listTasks.ts",13,"// 列出任務工具","// List tasks tool"
"src/tools/task/listTasks.ts",62,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/planTask.ts",9,"// 開始規劃工具","// Start planning tool"
"src/tools/task/planTask.ts",38,"// 獲取基礎目錄路徑","// Get base directory path"
"src/tools/task/planTask.ts",45,"// 準備所需參數","// Prepare required parameters"
"src/tools/task/planTask.ts",50,"// 當 existingTasksReference 為 true 時，從數據庫中載入所有任務作為參考","// When existingTasksReference is true, load all tasks from database as reference"
"src/tools/task/planTask.ts",56,"// 將任務分為已完成和未完成兩類","// Divide tasks into completed and incomplete categories"
"src/tools/task/planTask.ts",67,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/queryTask.ts",5,"// 查詢任務工具","// Query task tool"
"src/tools/task/queryTask.ts",49,"// 使用系統指令搜尋函數","// Use system command search function"
"src/tools/task/queryTask.ts",53,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/reflectTask.ts",4,"// 反思構想工具","// Task reflection tool"
"src/tools/task/reflectTask.ts",31,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/splitTasks.ts",10,"// 拆分任務工具","// Task splitting tool"
"src/tools/task/splitTasks.ts",130,"// 檢查 tasks 裡面的 name 是否有重複","// Check if there are duplicate names in tasks"
"src/tools/task/splitTasks.ts",148,"// 根據不同的更新模式處理任務","// Handle tasks according to different update modes"
"src/tools/task/splitTasks.ts",156,"// 將任務資料轉換為符合batchCreateOrUpdateTasks的格式","// Convert task data to format compatible with batchCreateOrUpdateTasks"
"src/tools/task/splitTasks.ts",174,"// 處理 clearAllTasks 模式","// Handle clearAllTasks mode"
"src/tools/task/splitTasks.ts",184,"// 清空任務後再創建新任務","// Clear tasks and then create new tasks"
"src/tools/task/splitTasks.ts",205,"// 對於其他模式，直接使用 batchCreateOrUpdateTasks","// For other modes, use batchCreateOrUpdateTasks directly"
"src/tools/task/splitTasks.ts",214,"// 根據不同的更新模式生成消息","// Generate messages based on different update modes"
"src/tools/task/splitTasks.ts",239,"// 獲取所有任務用於顯示依賴關係","// Get all tasks for displaying dependency relationships"
"src/tools/task/splitTasks.ts",244,"allTasks = [...createdTasks]; // 如果獲取失敗，至少使用剛創建的任務","// If retrieval fails, at least use the newly created tasks"
"src/tools/task/splitTasks.ts",248,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/splitTasksRaw.ts",10,"// 拆分任務工具","// Task splitting tool"
"src/tools/task/splitTasksRaw.ts",153,"// 使用 tasksSchema 驗證 tasks","// Use tasksSchema to validate tasks"
"src/tools/task/splitTasksRaw.ts",157,"// 返回錯誤訊息","// Return error message"
"src/tools/task/splitTasksRaw.ts",173,"// 檢查 tasks 裡面的 name 是否有重複","// Check if there are duplicate names in tasks"
"src/tools/task/splitTasksRaw.ts",191,"// 根據不同的更新模式處理任務","// Handle tasks according to different update modes"
"src/tools/task/splitTasksRaw.ts",199,"// 將任務資料轉換為符合batchCreateOrUpdateTasks的格式","// Convert task data to format compatible with batchCreateOrUpdateTasks"
"src/tools/task/splitTasksRaw.ts",217,"// 處理 clearAllTasks 模式","// Handle clearAllTasks mode"
"src/tools/task/splitTasksRaw.ts",227,"// 清空任務後再創建新任務","// Clear tasks and then create new tasks"
"src/tools/task/splitTasksRaw.ts",248,"// 對於其他模式，直接使用 batchCreateOrUpdateTasks","// For other modes, use batchCreateOrUpdateTasks directly"
"src/tools/task/splitTasksRaw.ts",257,"// 根據不同的更新模式生成消息","// Generate messages based on different update modes"
"src/tools/task/splitTasksRaw.ts",282,"// 獲取所有任務用於顯示依賴關係","// Get all tasks for displaying dependency relationships"
"src/tools/task/splitTasksRaw.ts",287,"allTasks = [...createdTasks]; // 如果獲取失敗，至少使用剛創建的任務","// If retrieval fails, at least use the newly created tasks"
"src/tools/task/splitTasksRaw.ts",291,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get the final prompt"
"src/tools/task/updateTask.ts",10,"// 更新任務內容工具","// Update task content tool"
"src/tools/task/updateTask.ts",140,"// 獲取任務以檢查它是否存在","// Get task to check if it exists"
"src/tools/task/updateTask.ts",158,"// 記錄要更新的任務和內容","// Record the task and content to be updated"
"src/tools/task/updateTask.ts",179,"// 執行更新操作","// Execute update operation"
"src/tools/task/verifyTask.ts",11,"// 檢驗任務工具","// Task verification tool"
"src/tools/task/verifyTask.ts",76,"// 更新任務狀態為已完成，並添加摘要","// Update task status to completed and add summary"
"src/tools/task/verifyTask.ts",82,"// 使用prompt生成器獲取最終prompt","// Use prompt generator to get final prompt"
"src/tools/thought/index.ts",1,"// 導出所有思維鏈工具","// Export all chain of thought tools"
"src/tools/thought/processThought.ts",71,"// 將參數轉換為規範的ThoughtData格式","// Convert parameters to standard ThoughtData format"
"src/tools/thought/processThought.ts",84,"// 確保思維編號不超過總思維數","// Ensure thought number does not exceed total thoughts"
"src/tools/thought/processThought.ts",87,"// 自動調整總思維數量","// Automatically adjust total thoughts count"
"src/tools/thought/processThought.ts",92,"// 格式化思維輸出","// Format thought output"
"src/tools/thought/processThought.ts",96,"// 返回成功響應","// Return success response"
"src/tools/thought/processThought.ts",107,"// 捕獲並處理所有未預期的錯誤","// Catch and handle all unexpected errors"
"src/types/index.ts",1,"// 任務狀態枚舉：定義任務在工作流程中的當前階段","// Task status enumeration: Defines the current stage of tasks in the workflow"
"src/types/index.ts",4,"PENDING = ""pending"", // 已創建但尚未開始執行的任務","// PENDING = ""pending"", // Created but not yet started tasks"
"src/types/index.ts",6,"IN_PROGRESS = ""in_progress"", // 當前正在執行的任務","// IN_PROGRESS = ""in_progress"", // Currently executing tasks"
"src/types/index.ts",8,"COMPLETED = ""completed"", // 已成功完成並通過驗證的任務","// COMPLETED = ""completed"", // Successfully completed and verified tasks"
"src/types/index.ts",10,"BLOCKED = ""blocked"", // 由於依賴關係而暫時無法執行的任務","// BLOCKED = ""blocked"", // Tasks temporarily unable to execute due to dependencies"
"src/types/index.ts",14,"// 任務依賴關係：定義任務之間的前置條件關係","// Task dependency: Defines prerequisite relationships between tasks"
"src/types/index.ts",17,"taskId: string; // 前置任務的唯一標識符，當前任務執行前必須完成此依賴任務","// taskId: string; // Unique identifier of prerequisite task, must be completed before current task execution"
"src/types/index.ts",21,"// 相關文件類型：定義文件與任務的關係類型","// Related file type: Defines the relationship type between files and tasks"
"src/types/index.ts",24,"TO_MODIFY = ""TO_MODIFY"", // 需要在任務中修改的文件","// TO_MODIFY = ""TO_MODIFY"", // Files that need to be modified in the task"
"src/types/index.ts",26,"REFERENCE = ""REFERENCE"", // 任務的參考資料或相關文檔","// REFERENCE = ""REFERENCE"", // Reference materials or related documents for the task"
"src/types/index.ts",28,"CREATE = ""CREATE"", // 需要在任務中建立的文件","// CREATE = ""CREATE"", // Files that need to be created in the task"
"src/types/index.ts",30,"DEPENDENCY = ""DEPENDENCY"", // 任務依賴的組件或庫文件","// DEPENDENCY = ""DEPENDENCY"", // Components or library files that the task depends on"
"src/types/index.ts",32,"OTHER = ""OTHER"", // 其他類型的相關文件","// OTHER = ""OTHER"", // Other types of related files"
"src/types/index.ts",36,"// 相關文件：定義任務相關的文件信息","// Related file: Defines file information related to tasks"
"src/types/index.ts",39,"path: string; // 文件路徑，可以是相對於項目根目錄的路徑或絕對路徑","// path: string; // File path, can be relative to project root or absolute path"
"src/types/index.ts",41,"type: RelatedFileType; // 文件與任務的關係類型","// type: RelatedFileType; // Relationship type between file and task"
"src/types/index.ts",43,"description?: string; // 文件的補充描述，說明其與任務的具體關係或用途","// description?: string; // Supplementary description of the file, explaining its specific relationship or purpose with the task"
"src/types/index.ts",45,"lineStart?: number; // 相關代碼區塊的起始行（選填）","// lineStart?: number; // Starting line of related code block (optional)"
"src/types/index.ts",47,"lineEnd?: number; // 相關代碼區塊的結束行（選填）","// lineEnd?: number; // Ending line of related code block (optional)"
"src/types/index.ts",51,"// 任務介面：定義任務的完整數據結構","// Task interface: Defines the complete data structure of tasks"
"src/types/index.ts",54,"id: string; // 任務的唯一標識符","// id: string; // Unique identifier of the task"
"src/types/index.ts",56,"name: string; // 簡潔明確的任務名稱","// name: string; // Concise and clear task name"
"src/types/index.ts",58,"description: string; // 詳細的任務描述，包含實施要點和驗收標準","// description: string; // Detailed task description, including implementation points and acceptance criteria"
"src/types/index.ts",60,"notes?: string; // 補充說明、特殊處理要求或實施建議（選填）","// notes?: string; // Supplementary notes, special handling requirements or implementation suggestions (optional)"
"src/types/index.ts",62,"status: TaskStatus; // 任務當前的執行狀態","// status: TaskStatus; // Current execution status of the task"
"src/types/index.ts",64,"dependencies: TaskDependency[]; // 任務的前置依賴關係列表","// dependencies: TaskDependency[]; // List of prerequisite dependencies for the task"
"src/types/index.ts",66,"createdAt: Date; // 任務創建的時間戳","// createdAt: Date; // Timestamp when the task was created"
"src/types/index.ts",68,"updatedAt: Date; // 任務最後更新的時間戳","// updatedAt: Date; // Timestamp of last task update"
"src/types/index.ts",70,"completedAt?: Date; // 任務完成的時間戳（僅適用於已完成的任務）","// completedAt?: Date; // Timestamp when task was completed (only for completed tasks)"
"src/types/index.ts",72,"summary?: string; // 任務完成摘要，簡潔描述實施結果和重要決策（僅適用於已完成的任務）","// summary?: string; // Task completion summary, briefly describing implementation results and important decisions (only for completed tasks)"
"src/types/index.ts",74,"relatedFiles?: RelatedFile[]; // 與任務相關的文件列表（選填）","// relatedFiles?: RelatedFile[]; // List of files related to the task (optional)"
"src/types/index.ts",77,"// 新增欄位：保存完整的技術分析結果","// New field: Save complete technical analysis results"
"src/types/index.ts",79,"analysisResult?: string; // 來自 analyze_task 和 reflect_task 階段的完整分析結果","// analysisResult?: string; // Complete analysis results from analyze_task and reflect_task stages"
"src/types/index.ts",82,"// 新增欄位：保存具體的實現指南","// New field: Save specific implementation guide"
"src/types/index.ts",84,"implementationGuide?: string; // 具體的實現方法、步驟和建議","// implementationGuide?: string; // Specific implementation methods, steps and recommendations"
"src/types/index.ts",87,"// 新增欄位：保存驗證標準和檢驗方法","// New field: Save verification standards and inspection methods"
"src/types/index.ts",89,"verificationCriteria?: string; // 明確的驗證標準、測試要點和驗收條件","// verificationCriteria?: string; // Clear verification standards, test points and acceptance conditions"
"src/types/index.ts",93,"// 任務複雜度級別：定義任務的複雜程度分類","// Task complexity level: Defines task complexity classification"
"src/types/index.ts",96,"LOW = ""低複雜度"", // 簡單且直接的任務，通常不需要特殊處理","// LOW = ""Low Complexity"", // Simple and straightforward tasks, usually no special handling required"
"src/types/index.ts",98,"MEDIUM = ""中等複雜度"", // 具有一定複雜性但仍可管理的任務","// MEDIUM = ""Medium Complexity"", // Tasks with some complexity but still manageable"
"src/types/index.ts",100,"HIGH = ""高複雜度"", // 複雜且耗時的任務，需要特別關注","// HIGH = ""High Complexity"", // Complex and time-consuming tasks that require special attention"
"src/types/index.ts",102,"VERY_HIGH = ""極高複雜度"", // 極其複雜的任務，建議拆分處理","// VERY_HIGH = ""Very High Complexity"", // Extremely complex tasks, recommended to be split for processing"
"src/types/index.ts",106,"// 任務複雜度閾值：定義任務複雜度評估的參考標準","// Task complexity thresholds: Defines reference standards for task complexity assessment"
"src/types/index.ts",110,"MEDIUM: 500, // 超過此字數判定為中等複雜度","// MEDIUM: 500, // Above this word count is classified as medium complexity"
"src/types/index.ts",112,"HIGH: 1000, // 超過此字數判定為高複雜度","// HIGH: 1000, // Above this word count is classified as high complexity"
"src/types/index.ts",114,"VERY_HIGH: 2000, // 超過此字數判定為極高複雜度","// VERY_HIGH: 2000, // Above this word count is classified as very high complexity"
"src/types/index.ts",118,"MEDIUM: 2, // 超過此依賴數量判定為中等複雜度","// MEDIUM: 2, // Above this dependency count is classified as medium complexity"
"src/types/index.ts",120,"HIGH: 5, // 超過此依賴數量判定為高複雜度","// HIGH: 5, // Above this dependency count is classified as high complexity"
"src/types/index.ts",122,"VERY_HIGH: 10, // 超過此依賴數量判定為極高複雜度","// VERY_HIGH: 10, // Above this dependency count is classified as very high complexity"
"src/types/index.ts",126,"MEDIUM: 200, // 超過此字數判定為中等複雜度","// MEDIUM: 200, // Above this word count is classified as medium complexity"
"src/types/index.ts",128,"HIGH: 500, // 超過此字數判定為高複雜度","// HIGH: 500, // Above this word count is classified as high complexity"
"src/types/index.ts",130,"VERY_HIGH: 1000, // 超過此字數判定為極高複雜度","// VERY_HIGH: 1000, // Above this word count is classified as very high complexity"
"src/types/index.ts",135,"// 任務複雜度評估結果：記錄任務複雜度分析的詳細結果","// Task complexity assessment result: Records detailed results of task complexity analysis"
"src/types/index.ts",138,"level: TaskComplexityLevel; // 整體複雜度級別","// level: TaskComplexityLevel; // Overall complexity level"
"src/types/index.ts",141,"// 各項評估指標的詳細數據","// Detailed data of various assessment metrics"
"src/types/index.ts",143,"descriptionLength: number; // 描述長度","// descriptionLength: number; // Description length"
"src/types/index.ts",145,"dependenciesCount: number; // 依賴數量","// dependenciesCount: number; // Dependencies count"
"src/types/index.ts",147,"notesLength: number; // 注記長度","// notesLength: number; // Notes length"
"src/types/index.ts",149,"hasNotes: boolean; // 是否有注記","// hasNotes: boolean; // Whether there are notes"
"src/types/index.ts",152,"recommendations: string[]; // 處理建議列表","// recommendations: string[]; // List of processing recommendations"
"src/utils/fileLoader.ts",27,"maxTotalLength: number = 15000 // 控制生成內容的總長度","// Control the total length of generated content"
"src/utils/fileLoader.ts",42,"// 按文件類型優先級排序（首先處理待修改的文件）","// Sort by file type priority (process files to be modified first)"
"src/utils/fileLoader.ts",56,"// 處理每個文件","// Process each file"
"src/utils/fileLoader.ts",65,"// 生成文件基本資訊","// Generate basic file information"
"src/utils/fileLoader.ts",69,"// 添加到總內容","// Add to total content"
"src/utils/paths.ts",6,"// 取得專案根目錄","// Get project root directory"
"src/utils/paths.ts",12,"// 全局 server 實例","// Global server instance"
"src/utils/paths.ts",35,"* 如果有 server 且支援 listRoots，則使用第一筆 file:// 開頭的 root + ""/data""","* If there's a server that supports listRoots, use the first root starting with file:// + ""/data"""
"src/utils/paths.ts",48,"// 找出第一筆 file:// 開頭的 root","// Find the first root starting with file://"
"src/utils/paths.ts",55,"// 從 file:// URI 中提取實際路徑","// Extract actual path from file:// URI"
"src/utils/paths.ts",65,"// 處理 process.env.DATA_DIR","// Handle process.env.DATA_DIR"
"src/utils/paths.ts",69,"// 如果 DATA_DIR 是絕對路徑，返回 ""DATA_DIR/rootPath最後一個資料夾名稱""","// If DATA_DIR is an absolute path, return ""DATA_DIR/last folder name of rootPath"""
"src/utils/paths.ts",75,"// 如果沒有 rootPath，直接返回 DATA_DIR","// If there's no rootPath, return DATA_DIR directly"
"src/utils/paths.ts",80,"// 如果 DATA_DIR 是相對路徑，返回 ""rootPath/DATA_DIR""","// If DATA_DIR is a relative path, return ""rootPath/DATA_DIR"""
"src/utils/paths.ts",85,"// 如果沒有 rootPath，使用 PROJECT_ROOT","// If there's no rootPath, use PROJECT_ROOT"
"src/utils/paths.ts",92,"// 如果沒有 DATA_DIR，使用預設邏輯","// If there's no DATA_DIR, use default logic"
"src/utils/paths.ts",98,"// 最後回退到專案根目錄","// Finally fall back to project root directory"
"src/web/webServer.ts",14,"// 創建 Express 應用","// Create Express application"
"src/web/webServer.ts",18,"// 儲存 SSE 客戶端的列表","// Store list of SSE clients"
"src/web/webServer.ts",22,"// 發送 SSE 事件的輔助函數","// Helper function to send SSE events"
"src/web/webServer.ts",26,"// 檢查客戶端是否仍然連接","// Check if client is still connected"
"src/web/webServer.ts",36,"// 清理已斷開的客戶端 (可選，但建議)","// Clean up disconnected clients (optional, but recommended)"
"src/web/webServer.ts",41,"// 設置靜態文件目錄","// Set up static file directory"
"src/web/webServer.ts",46,"const TASKS_FILE_PATH = await getTasksFilePath(); // 使用工具函數取得檔案路徑","// Use utility function to get file path"
"src/web/webServer.ts",51,"// 設置 API 路由","// Set up API routes"
"src/web/webServer.ts",55,"// 使用 fsPromises 保持異步讀取","// Use fsPromises to maintain async reading"
"src/web/webServer.ts",60,"// 確保檔案不存在時返回空任務列表","// Ensure empty task list is returned when file doesn't exist"
"src/web/webServer.ts",70,"// 新增：SSE 端點","// Add: SSE endpoint"
"src/web/webServer.ts",77,"// 可選: CORS 頭，如果前端和後端不在同一個 origin","// Optional: CORS headers if frontend and backend are not on the same origin"
"src/web/webServer.ts",82,"// 發送一個初始事件或保持連接","// Send an initial event or maintain connection"
"src/web/webServer.ts",86,"// 將客戶端添加到列表","// Add client to the list"
"src/web/webServer.ts",90,"// 當客戶端斷開連接時，將其從列表中移除","// When client disconnects, remove it from the list"
"src/web/webServer.ts",97,"// 定義 writeWebGuiFile 函數","// Define writeWebGuiFile function"
"src/web/webServer.ts",101,"// 讀取 TEMPLATES_USE 環境變數並轉換為語言代碼","// Read TEMPLATES_USE environment variable and convert to language code"
"src/web/webServer.ts",107,"// 自訂範本預設使用英文","// Custom templates default to English"
"src/web/webServer.ts",129,"// 獲取可用埠","// Get available port"
"src/web/webServer.ts",133,"// 啟動 HTTP 伺服器","// Start HTTP server"
"src/web/webServer.ts",136,"// 在伺服器啟動後開始監聽檔案變化","// Start monitoring file changes after server starts"
"src/web/webServer.ts",139,"// 檢查檔案是否存在，如果不存在則不監聽 (避免 watch 報錯)","// Check if file exists, don't monitor if it doesn't exist (to avoid watch errors)"
"src/web/webServer.ts",147,"// 稍微延遲發送，以防短時間內多次觸發 (例如編輯器保存)","// Slightly delay sending to prevent multiple triggers in a short time (e.g., editor saves)"
"src/web/webServer.ts",157,"// 將 URL 寫入 WebGUI.md","// Write URL to WebGUI.md"
"src/web/webServer.ts",162,"// 設置進程終止事件處理 (確保移除 watcher)","// Set up process termination event handling (ensure watcher removal)"
"src/web/webServer.ts",165,"// 關閉所有 SSE 連接","// Close all SSE connections"
"src/web/webServer.ts",170,"// 關閉 HTTP 伺服器","// Close HTTP server"
"docs/css/styles.css",1,"/* MCP Shrimp Task Manager 網站樣式 */","/* MCP Shrimp Task Manager Website Styles */"
"docs/css/styles.css",4,"/* 全局變量 */","/* Global Variables */"
"docs/css/styles.css",24,"/* 全局樣式 */","/* Global Styles */"
"docs/css/styles.css",28,"overflow-x: hidden; /* 防止水平溢出 */","/* Prevent horizontal overflow */"
"docs/css/styles.css",34,"overflow-x: hidden; /* 防止水平溢出 */","/* Prevent horizontal overflow */"
"docs/css/styles.css",38,"/* 自定義動畫 */","/* Custom Animations */"
"docs/css/styles.css",96,"/* 導航欄樣式 */","/* Navigation Bar Styles */"
"docs/css/styles.css",139,"/* 英雄區樣式 */","/* Hero Section Styles */"
"docs/css/styles.css",192,"/* 痛點與解決方案區樣式 */","/* Pain Points & Solutions Section Styles */"
"docs/css/styles.css",260,"/* 按鈕樣式 */","/* Button Styles */"
"docs/css/styles.css",316,"/* 卡片樣式 */","/* Card Styles */"
"docs/css/styles.css",330,"/* 代碼區塊樣式增強 */","/* Enhanced Code Block Styles */"
"docs/css/styles.css",344,"/* 響應式調整 - 手機端 (<768px) */","/* Responsive Adjustments - Mobile (<768px) */"
"docs/css/styles.css",392,"/* 平板端 (768px-1024px) */","/* Tablet (768px-1024px) */"
"docs/css/styles.css",416,"/* 低性能設備動畫降級 */","/* Animation Degradation for Low-Performance Devices */"
"docs/css/styles.css",429,"/* 輔助類 */","/* Utility Classes */"
"docs/css/styles.css",462,"/* GitHub圖標 */","/* GitHub Icon */"
"docs/css/styles.css",472,"/* 自定義滾動條 */","/* Custom Scrollbar */"
"docs/css/styles.css",491,"/* 功能卡片樣式 */","/* Feature Card Styles */"
"docs/css/styles.css",548,"/* 根據顏色設置不同顏色光暈 */","/* Set different color glows based on color */"
"docs/css/styles.css",604,"/* 工作流程區域樣式 */","/* Workflow Area Styles */"
"docs/css/styles.css",623,"/* 桌面版時間軸樣式 */","/* Desktop Timeline Styles */"
"docs/css/styles.css",657,"/* 移動版時間軸樣式 */","/* Mobile Timeline Styles */"
"docs/css/styles.css",682,"/* 步驟詳情彈窗樣式 */","/* Step Details Modal Styles */"
"docs/css/styles.css",714,"/* 安裝與配置區樣式 */","/* Installation & Configuration Section Styles */"
"docs/css/styles.css",741,"/* 命令行介面樣式 */","/* Command Line Interface Styles */"
"docs/css/styles.css",745,"background-color: #1a202c; /* 深色背景 */","/* Dark background */"
"docs/css/styles.css",747,"color: #e2e8f0; /* 亮色文本 */","/* Light text color */"
"docs/css/styles.css",789,"/* Cursor IDE 配置選項卡 */","/* Cursor IDE Configuration Tabs */"
"docs/css/styles.css",802,"/* 安裝卡片樣式 */","/* Installation Card Styles */"
"docs/css/styles.css",871,"/* CTA與資源區樣式 */","/* CTA & Resources Section Styles */"
"docs/css/styles.css",890,"/* CTA按鈕增強 */","/* Enhanced CTA Button */"
"docs/css/styles.css",906,"/* 資源卡片樣式 */","/* Resource Card Styles */"
"docs/css/styles.css",952,"/* 使用統計卡片 */","/* Usage Statistics Cards */"
"docs/css/styles.css",985,"/* 頁腳樣式 */","/* Footer Styles */"
"docs/css/styles.css",1051,"/* 語言切換按鈕 */","/* Language Switch Button */"
"docs/css/styles.css",1086,"/* 在移動設備上調整語言切換按鈕 */","/* Adjust language switch button on mobile devices */"
"docs/index.html",21,"<!-- AOS.js 滾動動畫庫 -->","<link href=""https://unpkg.com/aos@2.3.1/dist/aos.css"" rel=""stylesheet"" />"
"docs/js/i18n.js",1,"// i18n.js - 多語系支援功能","// i18n.js - Multi-language support functionality"
"docs/js/i18n.js",3,"// 翻譯資料結構","// Translation data structure"
"docs/js/i18n.js",622,"// 翻譯應用函數","// Translation application function"
"docs/js/i18n.js",625,"// 確保選擇的語言有效","// Ensure the selected language is valid"
"docs/js/i18n.js",633,"// 應用翻譯到所有帶有 data-i18n 屬性的元素","// Apply translations to all elements with data-i18n attribute"
"docs/js/i18n.js",645,"// 處理語言特定的連結","// Handle language-specific links"
"docs/js/i18n.js",727,"// 動態內容翻譯和性能優化函數","// =================================================="
"docs/js/i18n.js",845,"// 防禦性編程函數，確保翻譯系統的健壯性","// =================================================="
"docs/js/main.js",6,"// 頁面加載完成後執行","// Execute after page load"
"docs/js/main.js",9,"// 初始化滾動動畫","// Initialize scroll animation"
"docs/js/main.js",13,"// 初始化移動端菜單","// Initialize mobile menu"
"docs/js/main.js",17,"// 初始化代碼高亮和複製功能","// Initialize code highlighting and copy functionality"
"docs/js/main.js",63,"// 只在低性能設備上禁用動畫，根據用戶偏好設置","// Only disable animations on low-performance devices based on user preferences"
"docs/js/main.js",69,"// 在窗口調整大小時重新初始化AOS以確保正確的觸發位置","// Re-initialize AOS when window is resized to ensure correct trigger positions"
