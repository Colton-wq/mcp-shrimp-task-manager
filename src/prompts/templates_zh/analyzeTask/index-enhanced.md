## 业务导向技术分析 - MCP工具深度集成

**任务上下文：**
- **任务摘要**: {summary}
- **初步概念**: {initialConcept}
{iterationPrompt}

完成以下重点分析并在最后调用 `reflect_task`：

### 🎯 **业务验证检查**

**需求验证：**
- 提议的解决方案是否真正解决了用户的业务问题？
- 我们是否在构建用户真正需要的东西？
- 这是有效的最简单方法吗？
- 从业务角度来看，真正的成功标准是什么？

**价值评估：**
- 这为用户提供了什么具体价值？
- 这如何与项目目标保持一致？
- 我们是否过度工程化了解决方案？

### 🔍 **技术可行性分析 - MCP工具集成**

**🔧 强制要求：使用MCP工具进行代码分析**

**现有代码集成** (使用这些工具)：
- **`codebase-retrieval`**: 搜索类似功能、架构模式和现有组件
  - 查询: "类似于[任务描述]的功能"
  - 查询: "现有的[组件类型]实现"
  - 查询: "[领域]的项目架构模式"
- **`search_code_desktop-commander`**: 查找具体的代码模式和实现
  - 搜索: 相关类名、函数签名、API端点
  - 查找: 错误处理模式、验证逻辑、数据模型
- **`Everything MCP`**: 快速定位配置文件和相关资源
  - 查找: 配置文件、环境设置、依赖定义
  - 定位: 测试文件、文档、类似模块

**实施复杂性分析：**
- 核心技术挑战是什么？
- 哪些部分是直接的vs复杂的？
- 需要哪些外部依赖？
- 我们如何最小化实施风险？

**性能和可扩展性：**
- 有明显的性能问题吗？
- 这将如何随使用量扩展？
- 资源需求是什么？
- 有什么潜在的瓶颈需要解决？

### 🛠️ **实用实施策略**

**🔧 强制要求：信息收集阶段**

**如果对任何技术细节不确定，使用这些工具：**

1. **架构理解：**
   - `read_file_desktop-commander`: 读取项目配置文件 (package.json, tsconfig.json等)
   - `codebase-retrieval`: 理解整体项目结构和模式
   - `search_code_desktop-commander`: 查找架构文档或类似实现

2. **技术研究 (如果概念不熟悉)：**
   - **Force Search Protocol**: 使用 `EXA MCP` 或 `Tavily Remote MCP` 进行技术研究
   - 搜索模式: "[技术] + [具体用例] + 最佳实践"
   - 多源验证，检查最新更新 (2024-2025)
   - 查找限制、替代方案和实际经验

3. **集成分析：**
   - `search_code_desktop-commander`: 查找现有API集成、数据库连接
   - `Everything MCP`: 定位环境文件、配置模板
   - `codebase-retrieval`: 理解数据流和服务边界

**开发方法：**
- 最小可行实现是什么？
- 我们如何增量构建这个？
- 什么可以独立测试？
- 我们应该从哪里开始？

**集成点：**
- 这如何与现有系统连接？
- 需要什么API或接口？
- 有数据迁移考虑吗？
- 需要什么测试策略？

**风险缓解：**
- 实施过程中可能出什么问题？
- 我们如何早期发现问题？
- 回滚策略是什么？
- 我们如何确保质量？

### 📊 **质量和可维护性评估**

**🔧 代码质量验证 (使用MCP工具)：**
- **`codebase-retrieval`**: 检查现有代码风格、命名约定和模式
  - 查询: "代码风格示例", "命名约定", "错误处理模式"
- **`search_code_desktop-commander`**: 查找测试模式和质量标准
  - 搜索: 测试文件、代码检查配置、代码审查指南

**代码质量：**
- 这是否遵循项目编码标准？
- 设计是否长期可维护？
- 是否有清晰的模块边界？
- 错误处理是否充分？

**文档和测试：**
- 需要什么文档？
- 这将如何测试？
- 有边缘情况要考虑吗？
- 需要什么监控？

### 🚨 **MCP工具使用决策树**

**何时使用每个工具：**

```
📋 信息收集：
├── 需要理解现有代码？
│   └── 使用: codebase-retrieval + search_code_desktop-commander
├── 需要查找特定文件？
│   └── 使用: Everything MCP
├── 需要研究不熟悉的技术？
│   └── 使用: Force Search Protocol (EXA/Tavily MCP)
└── 需要读取配置/文档？
    └── 使用: read_file_desktop-commander

🔍 分析阶段：
├── 理解架构？
│   └── 使用: codebase-retrieval ("架构模式", "项目结构")
├── 查找类似实现？
│   └── 使用: search_code_desktop-commander (具体函数/类名)
├── 检查依赖？
│   └── 使用: Everything MCP (package.json, requirements.txt等)
└── 研究最佳实践？
    └── 使用: Force Search Protocol ("[技术]最佳实践")

⚡ 实施规划：
├── 需要现有代码示例？
│   └── 使用: codebase-retrieval + search_code_desktop-commander
├── 需要理解测试模式？
│   └── 使用: search_code_desktop-commander ("test", "spec", "mock")
└── 需要检查项目约定？
    └── 使用: read_file_desktop-commander (风格指南, contributing.md)
```

### ⚡ **最终建议**

**实施摘要：**
- 清晰、可操作的实施计划
- 具体的下一步和优先级
- 资源需求和时间表
- 成功指标和验证方法

**MCP工具使用摘要：**
- 列出使用了哪些工具以及收集了什么信息
- 突出显示需要额外研究的任何空白
- 注明应该验证的任何假设

**使用你的分析调用 reflect_task：**
```
reflect_task({ 
  summary: "基于MCP工具洞察的业务导向分析摘要", 
  analysis: "基于实际代码库分析和研究的实用实施策略" 
})
```

**🚨 关键提醒：**
- 永远不要猜测或假设技术细节 - 始终使用MCP工具收集真实信息
- 对任何不熟悉的技术或概念使用Force Search Protocol
- 结合多个工具进行全面理解
- 记录哪些工具提供了哪些见解以确保透明度