## 业务导向任务规划

你必须依序完成以下3个核心检查，然后调用 `analyze_task` 继续。

### 🎯 **步骤1：业务目标确认** (强制执行)

**用户请求：**
```
任务描述：{description}
需求要求：{requirements}
{tasksTemplate}
```

**关键业务问题** (继续前必须全部回答)：
- 用户的真实业务目标是什么？(不只是他们要求的)
- 这为最终用户解决了什么问题？
- 实现这个目标的最简单方案是什么？
- 我们如何知道这是成功的？

**业务影响评估：**
- 谁从这个解决方案中受益？
- 如果我们不实施这个会怎样？
- 这是现在的最高优先级吗？

### 🔍 **步骤2：最简方案优先** (强制执行)

**简化检查：**
- 我们能用现有功能/代码解决这个问题吗？
- 有更简单的替代方法吗？
- 我们能把这个分解成更小的独立部分吗？
- 最小可行实现是什么？

**现有代码分析** (使用工具检查)：
- 使用 `codebase-retrieval` 查找类似的现有功能
- 使用 `search_code_desktop-commander` 定位相关代码模式
- 使用 `Everything MCP` 查找相关文件和配置
- 检查 `shrimp-rules.md` 了解项目特定指导原则

**重用vs构建决策：**
- 我们可以重用哪些现有组件？
- 应该遵循现有代码的哪些模式？
- 哪里需要新的实现？

### 🛠️ **步骤3：智能工具使用** (强制执行)

**🔧 MCP工具使用决策矩阵：**

**代码理解：**
- **`codebase-retrieval`**: 
  - 查询: "现有的[功能类型]实现"
  - 查询: "[领域]的项目架构"
  - 查询: "类似于[描述]的功能"
- **`search_code_desktop-commander`**: 
  - 搜索: 具体的类/函数名
  - 查找: 错误处理模式、验证逻辑
  - 定位: API端点、数据库模型

**文件发现：**
- **`Everything MCP`**: 
  - 查找: 配置文件 (*.json, *.env, *.config)
  - 定位: 测试文件、文档、类似模块
  - 搜索: 依赖文件 (package.json, requirements.txt)

**技术研究 (未知技术)：**
- **Force Search Protocol** (使用 `EXA MCP` 或 `Tavily Remote MCP`)：
  - 模式: "[技术] + [用例] + 最佳实践 2024"
  - 验证: 多个来源、最新更新
  - 检查: 限制、替代方案、实际经验

**文档查阅：**
- **`read_file_desktop-commander`**: 
  - 阅读: 项目规则 (shrimp-rules.md)
  - 检查: README文件、API文档
  - 审查: 配置示例、设置指南

**🚨 工具组合策略：**

1. **架构分析**: `codebase-retrieval` → `search_code_desktop-commander` → `read_file_desktop-commander`
2. **技术研究**: `Force Search Protocol` → `codebase-retrieval` (现有用法)
3. **实施规划**: `Everything MCP` → `codebase-retrieval` → `search_code_desktop-commander`

**项目上下文检查：**
- 阅读项目规则：`shrimp-rules.md`
- 检查类似模块中的现有模式
- 理解当前架构和约定
- 识别集成点和依赖关系

### 📋 **解决方案设计**

基于上述分析，创建一个**实用的实施计划**：

**业务解决方案摘要：**
- 清楚说明这为用户解决了什么
- 预期的业务价值和成功指标

**技术方法：**
- 要重用或修改的具体组件
- 需要编写的新代码
- 与现有系统的集成点
- 测试和验证方法

**实施优先级：**
- 首先构建什么 (MVP)
- 以后可以添加什么
- 依赖关系和阻塞因素

**风险缓解：**
- 可能出什么问题？
- 如何最小化实施风险？
- 如果需要的话回滚计划

### ⚡ **下一步**

使用你的发现调用 analyze_task 工具：
```
analyze_task({ 
  summary: "简要的业务导向摘要", 
  initialConcept: "基于现有代码模式的实用实施方法" 
})
```

**🚨 关键提醒：**
- 技术分析前业务目标确认是强制性的
- 设计新解决方案前总是检查现有代码
- 优先选择简单、经过验证的方法而不是复杂的创新
- 使用MCP工具收集真实信息，永远不要猜测或假设